<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <title>Lista de Cultivos</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <style>
        body {
            background-color: #E0F2F1;
        }
        .table {
            background-color: #B2DFDB;
            color: #004D40;
        }
        .btn-secondary {
            background-color: #00796B;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container my-2">
        <!-- Tabela para exibir os cultivos -->
        <table class="table table-striped table-responsive-md">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Planta</th>
                    <th>Data de Plantio</th>
                    <th>Data Esperada de Colheita</th>
                    <th>Data de Colheita Realizada</th>
                    <th>Observação</th>
                    <th>Operações</th>
                </tr>
            </thead>
            <tbody>
                <!-- Iterar sobre a lista de cultivos -->
                <tr th:each="cultivo : ${listarTodosCultivos}">
                    <td th:text="${cultivo.id}"></td>
                    <td th:text="${cultivo.planta}"></td>
                    <td th:text="${#dates.format(cultivo.plantio, 'dd/MM/yyyy')}"></td>
                    <td th:text="${#dates.format(cultivo.previsto, 'dd/MM/yyyy')}"></td>
                    <td th:text="${#dates.format(cultivo.colheita, 'dd/MM/yyyy')}"></td>
                    <td th:text="${cultivo.obs}"></td>
                    <td>
                        <!-- Botões para atualizar e deletar cultivo -->
                        <a th:href="@{/acompanharCultivo/{id}(id=${cultivo.id}, hortaId=${hortaId}, hortaNome=${hortaNome})}" class="btn btn-primary">Acompanhamento</a>
                        <a th:href="@{/deletarCultivo/{id}(id=${cultivo.id}, hortaId=${hortaId}, hortaNome=${hortaNome})}" class="btn btn-danger">Excluir</a>
                    </td>
                </tr>
            </tbody>
        </table>

        <!-- Formulário para adicionar novo cultivo -->
        <form th:action="@{/salvarCultivo(hortaId=${hortaId}, hortaNome=${hortaNome})}" method="post" th:object="${cultivo}" class="mb-3">
            <div class="form-group">
                <label for="planta">Planta</label>
                <input type="text" class="form-control" id="planta" name="planta" th:field="*{planta}" placeholder="Nome da planta" required>
            </div>
            <div class="form-group">
                <label for="plantio">Data de Plantio</label>
                <input type="date" class="form-control" id="plantio" name="plantio" th:field="*{plantio}" required>
            </div>
            <div class="form-group">
                <label for="previsto">Data Prevista de Colheita</label>
                <input type="date" class="form-control" id="previsto" name="previsto" th:field="*{previsto}">
            </div>
            <div class="form-group">
                <label for="obs">Observação</label>
                <textarea class="form-control" id="obs" name="obs" th:field="*{obs}" rows="3" placeholder="Observações adicionais"></textarea>
            </div>
            <input type="hidden" name="hortaId" th:value="${hortaId}" />
            <input type="hidden" name="hortaNome" th:value="${hortaNome}" />
            <button type="submit" class="btn btn-primary">Salvar</button>
        </form>

        <!-- Botão para retornar à página inicial -->
        <a th:href="@{/}" class="btn btn-secondary">Retornar à Página Inicial</a>
    </div>
</body>
</html>

